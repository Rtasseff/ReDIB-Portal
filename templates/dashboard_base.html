{% extends 'base.html' %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row">
        <!-- Sidebar Navigation -->
        <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
            <div class="position-sticky pt-3">
                <div class="list-group">
                    <a href="{% url 'core:dashboard' %}" class="list-group-item list-group-item-action {% block sidebar_dashboard_active %}{% endblock %}">
                        <i class="bi bi-house-door"></i> Dashboard
                    </a>

                    <!-- Applicant Menu Items -->
                    {% if is_applicant %}
                    <div class="mt-3 mb-2 px-3">
                        <small class="text-muted text-uppercase">Applicant</small>
                    </div>
                    <a href="{% url 'applications:my_applications' %}" class="list-group-item list-group-item-action {% block sidebar_my_apps_active %}{% endblock %}">
                        <i class="bi bi-file-text"></i> My Applications
                    </a>
                    <a href="{% url 'calls:public_list' %}" class="list-group-item list-group-item-action {% block sidebar_public_calls_active %}{% endblock %}">
                        <i class="bi bi-megaphone"></i> Open Calls
                    </a>
                    {% endif %}

                    <!-- Node Coordinator Menu Items -->
                    {% if is_node_coordinator %}
                    <div class="mt-3 mb-2 px-3">
                        <small class="text-muted text-uppercase">Node Coordinator</small>
                    </div>
                    <a href="{% url 'applications:feasibility_queue' %}" class="list-group-item list-group-item-action {% block sidebar_feasibility_active %}{% endblock %}">
                        <i class="bi bi-clipboard-check"></i> Feasibility Reviews
                    </a>
                    <a href="{% url 'access:node_scheduling' %}" class="list-group-item list-group-item-action {% block sidebar_scheduling_active %}{% endblock %}">
                        <i class="bi bi-calendar"></i> Scheduling
                    </a>
                    <a href="{% url 'access:access_tracking' %}" class="list-group-item list-group-item-action {% block sidebar_tracking_active %}{% endblock %}">
                        <i class="bi bi-activity"></i> Access Tracking
                    </a>
                    {% endif %}

                    <!-- Evaluator Menu Items -->
                    {% if is_evaluator %}
                    <div class="mt-3 mb-2 px-3">
                        <small class="text-muted text-uppercase">Evaluator</small>
                    </div>
                    <a href="{% url 'evaluations:my_evaluations' %}" class="list-group-item list-group-item-action {% block sidebar_evaluations_active %}{% endblock %}">
                        <i class="bi bi-star"></i> My Evaluations
                    </a>
                    {% endif %}

                    <!-- Coordinator Menu Items -->
                    {% if is_coordinator %}
                    <div class="mt-3 mb-2 px-3">
                        <small class="text-muted text-uppercase">Coordinator</small>
                    </div>
                    <a href="{% url 'calls:coordinator_dashboard' %}" class="list-group-item list-group-item-action {% block sidebar_call_mgmt_active %}{% endblock %}">
                        <i class="bi bi-folder"></i> Call Management
                    </a>
                    <a href="{% url 'evaluations:assignment_dashboard' %}" class="list-group-item list-group-item-action {% block sidebar_assign_eval_active %}{% endblock %}">
                        <i class="bi bi-people"></i> Assign Evaluators
                    </a>
                    <a href="{% url 'applications:resolution_dashboard' %}" class="list-group-item list-group-item-action {% block sidebar_resolution_active %}{% endblock %}">
                        <i class="bi bi-check-circle"></i> Resolution
                    </a>
                    <a href="{% url 'reports:statistics' %}" class="list-group-item list-group-item-action {% block sidebar_reports_active %}{% endblock %}">
                        <i class="bi bi-graph-up"></i> Reports
                    </a>
                    {% endif %}

                    <!-- Common Items -->
                    <div class="mt-3 mb-2 px-3">
                        <small class="text-muted text-uppercase">General</small>
                    </div>
                    <a href="{% url 'calls:public_list' %}" class="list-group-item list-group-item-action">
                        <i class="bi bi-globe"></i> Public Calls
                    </a>

                    {% if is_admin %}
                    <div class="mt-3 mb-2 px-3">
                        <small class="text-muted text-uppercase">Administration</small>
                    </div>
                    <a href="{% url 'admin:index' %}" class="list-group-item list-group-item-action">
                        <i class="bi bi-gear"></i> Admin Panel
                    </a>
                    {% endif %}
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            {% block dashboard_content %}
            <!-- Content goes here -->
            {% endblock %}
        </main>
    </div>
</div>

<style>
    .sidebar {
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        height: calc(100vh - 56px); /* Adjust based on navbar height */
        overflow-y: auto;
        box-shadow: inset -1px 0 0 rgba(0, 0, 0, .1);
    }

    .sidebar .list-group-item {
        border-left: 3px solid transparent;
        border-radius: 0;
    }

    .sidebar .list-group-item.active,
    .sidebar .list-group-item:hover {
        border-left-color: #0d6efd;
        background-color: #f8f9fa;
        color: #0d6efd;
        font-weight: 500;
    }

    .sidebar .bi {
        margin-right: 8px;
    }

    @media (max-width: 767.98px) {
        .sidebar {
            position: relative;
            height: auto;
        }
    }
</style>

<!-- Bootstrap Icons CDN (for sidebar icons) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
{% endblock %}
